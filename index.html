<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css">
    <title>Lab01_poprawione</title>
</head>

<body>

    <form>
        <ol id="list" contenteditable="true">
            <li class="element" draggable="true" id="item" contenteditable="true">
                Element 1
            </li>
            <li class="element" draggable="true" id="item" contenteditable="true">
                Element 2
            </li>
            <li class="element" draggable="true" id="item" contenteditable="true">
                Element 3
            </li>
            <li class="element" draggable="true" id="item" contenteditable="true">
                Element 4
            </li>
            <li class="element" draggable="true" id="item" contenteditable="true">
                Element 5
            </li>
            <li class="element" draggable="true" id="item" contenteditable="true">
                Element 6
            </li>
        </ol>
    </form>
    <script>
        var dragging = null;
        var list = document.getElementById('list');
        var border_style = 'solid 1px orange';

        document.addEventListener('dragstart', function (event) {
            var target = getLI(event.target);
            dragging = target;
        });

        document.addEventListener('dragover', function (event) {
            event.preventDefault();
            var target = getLI(event.target);
            if(!target) {
                return;
            }
            var bounding = target.getBoundingClientRect();
            var offset = bounding.y + (bounding.height / 2);
            if (event.clientY - offset > 0) {
                target.style['border-top'] = '';
                target.style['border-bottom'] = border_style;
            } else {
                target.style['border-top'] = border_style;
                target.style['border-bottom'] = '';
            }
        });

        document.addEventListener('dragleave', function (event) {
            var target = getLI(event.target);

            if(!target) {
                return;
            }

            target.style['border-bottom'] = '';
            target.style['border-top'] = '';
        });

        document.addEventListener('drop', function (event) {
            event.preventDefault();
            var target = getLI(event.target);
            if(!target) {
                return;
            }
            if (target.style['border-bottom'] !== '') {
                target.style['border-bottom'] = '';
                target.parentNode.insertBefore(dragging, event.target.nextSibling);
            } else {
                target.style['border-top'] = '';
                target.parentNode.insertBefore(dragging, event.target);
            }
        });

        function getLI(target) {
            while (target.nodeName != 'LI' && target.nodeName != 'BODY') target = target.parentNode;
            if (target.nodeName == 'BODY') return false;
            return target;
        }

    </script>
</body>

</html>